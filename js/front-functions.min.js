var points = 10;
var str_value = 0;
var int_value = 0;
var sta_value = 0;
var agi_value = 0;

// Funtion to increase the skill bar
function valueup(skill) {
	if (skill !== null || skill !== 'undefined') {
		if (points >= 1) {
			points -= 1;
			if (skill == 1) {
				str_value += 1;
				if (str_value <= 9) {
					$('#str_value').html('0'+str_value);
				} else {
					$('#str_value').html(str_value);
				}
				$('#points').html(points);
				$("#1_"+str_value).addClass("skill-level");
				$('#DPSCalc').html(2 + ( str_value * 2 ));
			} else if (skill == 2) {
				int_value += 1;
				if ( int_value <= 9 ) {
					$('#int_value').html('0'+int_value);
				} else {
					$('#int_value').html(int_value);
				}
				$('#points').html(points);
				$("#2_"+int_value).addClass("skill-level");
				$('#MPCalc').html((10 + ( int_value * 2 )) + ' / ' + (10 + ( int_value * 2 )));
				$('#MDPSCalc').html(2 + ( int_value * 2 ));
			} else if (skill == 3) {
				sta_value += 1;
				if ( sta_value <= 9 ) {
					$('#sta_value').html('0'+sta_value);
				} else {
					$('#sta_value').html(sta_value);
				}
				$('#points').html(points);
				$("#3_"+sta_value).addClass("skill-level");
				$('#HPCalc').html((10 + ( sta_value * 2 )) + ' / ' + (10 + ( sta_value * 2 )));
			} else if (skill == 4) {
				agi_value += 1;
				if ( agi_value <= 9 ) {
					$('#agi_value').html('0'+agi_value);
				} else {
					$('#agi_value').html(agi_value);
				}
				$('#points').html(points);
				$("#4_"+agi_value).addClass("skill-level");
				$('#DCalc').html((10 + ( agi_value * 2 )) + '%');
				$('#CCalc').html((10 + ( agi_value * 2 )) + '%');
			}
		}
	}
};

// Funtion to decrease the skill bar
function valuedown(skill) {
	if (skill !== null || skill !== 'undefined') {
		if (skill == 1) {
			if (str_value >= 1) {
				str_value -= 1;
				points += 1;
				if (str_value <= 9) {
					$('#str_value').html('0'+str_value);
				} else {
					$('#str_value').html(str_value);
				}
				$('#points').html(points);
				$("#1_"+(str_value+1)).removeClass("skill-level");
				$('#DPSCalc').html(2 + ( str_value * 2 ));
			}
		} else if (skill == 2) {
			if (int_value >= 1) {
				int_value -= 1;
				points += 1;
				if (int_value <= 9) {
					$('#int_value').html('0'+int_value);
				} else {
					$('#int_value').html(int_value);
				}
				$('#points').html(points);
				$("#2_"+(int_value+1)).removeClass("skill-level");
				$('#MPCalc').html((10 + ( int_value * 2 )) + ' / ' + (10 + ( int_value * 2 )));
				$('#MDPSCalc').html(2 + ( int_value * 2 ));
			}
		} else if (skill == 3) {
			if (sta_value >= 1) {
				sta_value -= 1;
				points += 1;
				if (sta_value <= 9) {
					$('#sta_value').html('0'+sta_value);
				} else {
					$('#sta_value').html(sta_value);
				}
				$('#points').html(points);
				$("#3_"+(sta_value+1)).removeClass("skill-level");
				$("#3_"+sta_value).addClass("skill-level");
				$('#HPCalc').html((10 + ( sta_value * 2 )) + ' / ' + (10 + ( sta_value * 2 )));
			}
		} else if (skill == 4) {
			if (agi_value >= 1) {
				agi_value -= 1;
				points += 1;
				if (agi_value <= 9) {
					$('#agi_value').html('0'+agi_value);
				} else {
					$('#agi_value').html(agi_value);
				}
				$('#points').html(points);
				$("#4_"+(agi_value+1)).removeClass("skill-level");
				$('#DCalc').html((10 + ( agi_value * 2 )) + '%');
				$('#CCalc').html((10 + ( agi_value * 2 )) + '%');
			}
		}
	}
};

// Validates the character and then calls the next page.
function submitcharacter() {
	var inputname = $("#name");
  	if (inputname.val().length > 0) {
    	if (points == 0) {
				var name = $("#name").val();
				$('#startnewgame').modal('hide');
				animateParchment('pages/newcharacter.php?name=' + name + '&str=' + str_value + '&int=' + int_value + '&sta=' + sta_value + '&agi=' + agi_value);
			} else {
				alert('You havent used all of your talent points yet!');
			}
  	} else {
			alert('You havent named your character yet!');
	}
};

$(document).ready(function () {
	for (i=0; i < 10; i++) {
		setTimeout(makeSpark('.parchment-middle'), Math.ceil(Math.random() * 500));
	}

	$("#STR").tooltip({
		'selector': '',
		'placement': 'bottom'
	});
	$("#INT").tooltip({
		'selector': '',
		'placement': 'bottom'
	});
	$("#STA").tooltip({
		'selector': '',
		'placement': 'bottom'
	});
	$("#AGI").tooltip({
		'selector': '',
		'placement': 'bottom'
	});
});
